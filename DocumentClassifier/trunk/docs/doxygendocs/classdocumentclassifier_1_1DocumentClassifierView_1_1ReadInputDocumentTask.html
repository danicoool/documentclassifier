<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>DocumentClassifier: documentclassifier.DocumentClassifierView.ReadInputDocumentTask Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.3 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="namespaces.html"><span>Packages</span></a></li>
    <li class="current"><a href="classes.html"><span>Classes</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
  </ul>
</div>
<div class="tabs">
  <ul>
    <li><a href="classes.html"><span>Alphabetical&nbsp;List</span></a></li>
    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul>
</div>
<div class="nav">
<a class="el" href="namespacedocumentclassifier.html">documentclassifier</a>.<a class="el" href="classdocumentclassifier_1_1DocumentClassifierView.html">DocumentClassifierView</a>.<a class="el" href="classdocumentclassifier_1_1DocumentClassifierView_1_1ReadInputDocumentTask.html">ReadInputDocumentTask</a></div>
<h1>documentclassifier.DocumentClassifierView.ReadInputDocumentTask Class Reference</h1><!-- doxytag: class="documentclassifier::DocumentClassifierView::ReadInputDocumentTask" -->
<p>
<a href="classdocumentclassifier_1_1DocumentClassifierView_1_1ReadInputDocumentTask-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classdocumentclassifier_1_1Document.html">Document</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdocumentclassifier_1_1DocumentClassifierView_1_1ReadInputDocumentTask.html#90d0d43e1bf84bc23b4d27f5c685bdd4">doInBackground</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdocumentclassifier_1_1DocumentClassifierView_1_1ReadInputDocumentTask.html#3befba0d83549633201381010ffc30b9">succeeded</a> (<a class="el" href="classdocumentclassifier_1_1Document.html">Document</a> result)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdocumentclassifier_1_1DocumentClassifierView_1_1ReadInputDocumentTask.html#fc2b2d446f0730ef191f5fe1a3d3da1b">failed</a> (Throwable ex)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdocumentclassifier_1_1DocumentClassifierView_1_1ReadInputDocumentTask.html#e044c823220034132c39c22570559e68">finished</a> ()</td></tr>

<tr><td colspan="2"><br><h2>Package Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdocumentclassifier_1_1DocumentClassifierView_1_1ReadInputDocumentTask.html#7aaf80df08d63c96122865f4e9142406">ReadInputDocumentTask</a> (org.jdesktop.application.Application app, String URL)</td></tr>

<tr><td colspan="2"><br><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">String&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdocumentclassifier_1_1DocumentClassifierView_1_1ReadInputDocumentTask.html#6901e2cf41bec9cfbaacf8f802b5363e">address</a></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>

<p>Definition at line <a class="el" href="DocumentClassifierView_8java-source.html#l00776">776</a> of file <a class="el" href="DocumentClassifierView_8java-source.html">DocumentClassifierView.java</a>.</p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="7aaf80df08d63c96122865f4e9142406"></a><!-- doxytag: member="documentclassifier::DocumentClassifierView::ReadInputDocumentTask::ReadInputDocumentTask" ref="7aaf80df08d63c96122865f4e9142406" args="(org.jdesktop.application.Application app, String URL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">documentclassifier.DocumentClassifierView.ReadInputDocumentTask.ReadInputDocumentTask           </td>
          <td>(</td>
          <td class="paramtype">org.jdesktop.application.Application&nbsp;</td>
          <td class="paramname"> <em>app</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&nbsp;</td>
          <td class="paramname"> <em>URL</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [package]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="DocumentClassifierView_8java-source.html#l00783">783</a> of file <a class="el" href="DocumentClassifierView_8java-source.html">DocumentClassifierView.java</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00783"></a>00783                                                                                     {
<a name="l00784"></a>00784             <span class="comment">// Runs on the EDT.  Copy GUI state that</span>
<a name="l00785"></a>00785             <span class="comment">// doInBackground() depends on from parameters</span>
<a name="l00786"></a>00786             <span class="comment">// to LeggiPaginaInputTask fields, here.</span>
<a name="l00787"></a>00787             super(app);
<a name="l00788"></a>00788             <span class="keyword">this</span>.address = URL.trim();
<a name="l00789"></a>00789         }
</pre></div>
<p>

</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="90d0d43e1bf84bc23b4d27f5c685bdd4"></a><!-- doxytag: member="documentclassifier::DocumentClassifierView::ReadInputDocumentTask::doInBackground" ref="90d0d43e1bf84bc23b4d27f5c685bdd4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classdocumentclassifier_1_1Document.html">Document</a> documentclassifier.DocumentClassifierView.ReadInputDocumentTask.doInBackground           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
The property 'taskRunning' is set to "true", such that it is possible to stop this task while it is running.<p>
The property 'documentRead' is set to "false", at least until the task doesn't finish without errors: In this case it means that it has been able to read and extract the title and text from the current document, and that property can therefore be set to "true".<p>
The text area with information on the current state of execution is cleaned.<p>
The query document is scraped by the current scraper.<p>
If exceptions have not been thrown during the scraping of the query document, a new instance of the class <a class="el" href="classdocumentclassifier_1_1Document.html">Document</a> is created. 
<p>Definition at line <a class="el" href="DocumentClassifierView_8java-source.html#l00792">792</a> of file <a class="el" href="DocumentClassifierView_8java-source.html">DocumentClassifierView.java</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00792"></a>00792                                             {
<a name="l00793"></a>00793             <span class="comment">// Your Task's code here.  This method runs</span>
<a name="l00794"></a>00794             <span class="comment">// on a background thread, so don't reference</span>
<a name="l00795"></a>00795             <span class="comment">// the Swing GUI from here.</span>
<a name="l00796"></a>00796             <span class="keywordflow">try</span> {
<a name="l00801"></a>00801                 <a class="code" href="classdocumentclassifier_1_1DocumentClassifierView.html#c9b244046162bff384717dc266e18cb3">setTaskRunning</a>(<span class="keyword">true</span>);
<a name="l00807"></a>00807                 <a class="code" href="classdocumentclassifier_1_1DocumentClassifierView.html#7a5e7a137278ac7e02228b2a81de994b">setDocumentRead</a>(<span class="keyword">false</span>);
<a name="l00811"></a>00811                 textAreaOutput.setText(<span class="stringliteral">""</span>);
<a name="l00812"></a>00812                 
<a name="l00813"></a>00813                 setMessage(<a class="code" href="classdocumentclassifier_1_1DocumentClassifierView.html#c9478425066b77eaf86656749f33d7c5">documentClassifierViewResources</a>.getString(<span class="stringliteral">"messages.readingScrapingDocument"</span>));
<a name="l00817"></a>00817                 URLConnection connection;
<a name="l00818"></a>00818                 String[] titleText;
<a name="l00819"></a>00819                 <span class="keywordflow">if</span> (<a class="code" href="classdocumentclassifier_1_1DocumentClassifierView_1_1ReadInputDocumentTask.html#6901e2cf41bec9cfbaacf8f802b5363e">address</a>.toLowerCase().startsWith(<span class="stringliteral">"http://"</span>)) {
<a name="l00820"></a>00820                     connection = (HttpURLConnection) <span class="keyword">new</span> URL(<a class="code" href="classdocumentclassifier_1_1DocumentClassifierView_1_1ReadInputDocumentTask.html#6901e2cf41bec9cfbaacf8f802b5363e">address</a>).openConnection();
<a name="l00821"></a>00821                     titleText = <a class="code" href="classdocumentclassifier_1_1DocumentClassifierView.html#f07afe74c126212e56deb4b18e592f9f">application</a>.readDocument(connection.getInputStream());
<a name="l00822"></a>00822                 } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classdocumentclassifier_1_1DocumentClassifierView_1_1ReadInputDocumentTask.html#6901e2cf41bec9cfbaacf8f802b5363e">address</a>.toLowerCase().startsWith(<span class="stringliteral">"https://"</span>)) {
<a name="l00823"></a>00823                     connection=(HttpsURLConnection) <span class="keyword">new</span> URL(<a class="code" href="classdocumentclassifier_1_1DocumentClassifierView_1_1ReadInputDocumentTask.html#6901e2cf41bec9cfbaacf8f802b5363e">address</a>).openConnection();
<a name="l00824"></a>00824                     titleText = <a class="code" href="classdocumentclassifier_1_1DocumentClassifierView.html#f07afe74c126212e56deb4b18e592f9f">application</a>.readDocument(connection.getInputStream());
<a name="l00825"></a>00825                 } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classdocumentclassifier_1_1DocumentClassifierView_1_1ReadInputDocumentTask.html#6901e2cf41bec9cfbaacf8f802b5363e">address</a>.toLowerCase().startsWith(<span class="stringliteral">"file://"</span>)) {
<a name="l00826"></a>00826                     titleText = <a class="code" href="classdocumentclassifier_1_1DocumentClassifierView.html#f07afe74c126212e56deb4b18e592f9f">application</a>.readDocument(<span class="keyword">new</span> FileInputStream(<a class="code" href="classdocumentclassifier_1_1DocumentClassifierView_1_1ReadInputDocumentTask.html#6901e2cf41bec9cfbaacf8f802b5363e">address</a>.substring(7)));
<a name="l00827"></a>00827                 } <span class="keywordflow">else</span> {
<a name="l00828"></a>00828                     titleText = <a class="code" href="classdocumentclassifier_1_1DocumentClassifierView.html#f07afe74c126212e56deb4b18e592f9f">application</a>.readDocument(<span class="keyword">new</span> FileInputStream(<a class="code" href="classdocumentclassifier_1_1DocumentClassifierView_1_1ReadInputDocumentTask.html#6901e2cf41bec9cfbaacf8f802b5363e">address</a>));
<a name="l00829"></a>00829                 }
<a name="l00830"></a>00830                 setMessage(<a class="code" href="classdocumentclassifier_1_1DocumentClassifierView.html#c9478425066b77eaf86656749f33d7c5">documentClassifierViewResources</a>.getString(<span class="stringliteral">"messages.Document"</span>)+<span class="stringliteral">" "</span>+<a class="code" href="classdocumentclassifier_1_1DocumentClassifierView.html#c9478425066b77eaf86656749f33d7c5">documentClassifierViewResources</a>.getString(<span class="stringliteral">"messages.Read"</span>).toLowerCase());
<a name="l00835"></a>00835                 <a class="code" href="classdocumentclassifier_1_1DocumentClassifierView.html#65eaa8ed1e292b68188615c2d859c741">currentQuery</a> = <span class="keyword">new</span> Document(titleText[0], titleText[1], <a class="code" href="classdocumentclassifier_1_1DocumentClassifierView_1_1ReadInputDocumentTask.html#6901e2cf41bec9cfbaacf8f802b5363e">address</a>);
<a name="l00836"></a>00836                 <span class="keywordflow">return</span> currentQuery;
<a name="l00837"></a>00837             } <span class="keywordflow">catch</span> (Exception ex) {
<a name="l00838"></a>00838                 <a class="code" href="classdocumentclassifier_1_1DocumentClassifierView.html#65eaa8ed1e292b68188615c2d859c741">currentQuery</a>=<span class="keyword">new</span> Document(<a class="code" href="classdocumentclassifier_1_1DocumentClassifierView_1_1ReadInputDocumentTask.html#6901e2cf41bec9cfbaacf8f802b5363e">address</a>);
<a name="l00839"></a>00839             } <span class="keywordflow">finally</span> {
<a name="l00840"></a>00840                 <span class="keywordflow">return</span> <a class="code" href="classdocumentclassifier_1_1DocumentClassifierView.html#65eaa8ed1e292b68188615c2d859c741">currentQuery</a>;
<a name="l00841"></a>00841             }
<a name="l00842"></a>00842         }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="3befba0d83549633201381010ffc30b9"></a><!-- doxytag: member="documentclassifier::DocumentClassifierView::ReadInputDocumentTask::succeeded" ref="3befba0d83549633201381010ffc30b9" args="(Document result)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void documentclassifier.DocumentClassifierView.ReadInputDocumentTask.succeeded           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classdocumentclassifier_1_1Document.html">Document</a>&nbsp;</td>
          <td class="paramname"> <em>result</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
If the task has reached its end without errors--&gt;It is in the state 'Succeeded'--&gt; This method gets executed, and the result of task's computation (an instance of the class <a class="el" href="classdocumentclassifier_1_1Document.html">Document</a>) is passed in input to it.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>result</em>&nbsp;</td><td>The result of the computation of the task: An instance of the class <a class="el" href="classdocumentclassifier_1_1Document.html">Document</a>, representing the document just scraped. </td></tr>
  </table>
</dl>

<p>
The content of the scraped document is shown in the graphic interface, and the property 'documentRead' is set to "true". 
<p>Definition at line <a class="el" href="DocumentClassifierView_8java-source.html#l00853">853</a> of file <a class="el" href="DocumentClassifierView_8java-source.html">DocumentClassifierView.java</a>.</p>

<p>References <a class="el" href="Document_8java-source.html#l00274">documentclassifier.Document.getText()</a>, and <a class="el" href="Document_8java-source.html#l00283">documentclassifier.Document.getTitle()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00853"></a>00853                                                   {
<a name="l00854"></a>00854             <span class="comment">// Runs on the EDT.  Update the GUI based on</span>
<a name="l00855"></a>00855             <span class="comment">// the result computed by doInBackground().</span>
<a name="l00860"></a>00860 <span class="comment"></span>            labelTitle.setText(result.getTitle());
<a name="l00861"></a>00861             labelText.setText(result.getText());
<a name="l00862"></a>00862             <a class="code" href="classdocumentclassifier_1_1DocumentClassifierView.html#7a5e7a137278ac7e02228b2a81de994b">setDocumentRead</a>(<span class="keyword">true</span>);
<a name="l00863"></a>00863         }
</pre></div>
<p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="classdocumentclassifier_1_1DocumentClassifierView_1_1ReadInputDocumentTask_3befba0d83549633201381010ffc30b9_cgraph.png" border="0" usemap="#classdocumentclassifier_1_1DocumentClassifierView_1_1ReadInputDocumentTask_3befba0d83549633201381010ffc30b9_cgraph_map" alt=""></center>
<map name="classdocumentclassifier_1_1DocumentClassifierView_1_1ReadInputDocumentTask_3befba0d83549633201381010ffc30b9_cgraph_map">
<area shape="rect" href="classdocumentclassifier_1_1Document.html#65e173ed014078689f27506c2c03dd54" title="documentclassifier.Document.getText" alt="" coords="591,5,852,32"><area shape="rect" href="classdocumentclassifier_1_1Document.html#d672dd5adf6b90daf2037acbaea20e50" title="documentclassifier.Document.getTitle" alt="" coords="591,56,852,83"></map>
</div>

</div>
</div><p>
<a class="anchor" name="fc2b2d446f0730ef191f5fe1a3d3da1b"></a><!-- doxytag: member="documentclassifier::DocumentClassifierView::ReadInputDocumentTask::failed" ref="fc2b2d446f0730ef191f5fe1a3d3da1b" args="(Throwable ex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void documentclassifier.DocumentClassifierView.ReadInputDocumentTask.failed           </td>
          <td>(</td>
          <td class="paramtype">Throwable&nbsp;</td>
          <td class="paramname"> <em>ex</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
If instead the task has not completed its execution with success--&gt;It is in the state 'Failed'--&gt; An error message is shown.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ex</em>&nbsp;</td><td>An instance of the class <a class="el" href="">Throwable</a>, which represents the error that has led to the state 'Failed'. </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="DocumentClassifierView_8java-source.html#l00873">873</a> of file <a class="el" href="DocumentClassifierView_8java-source.html">DocumentClassifierView.java</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00873"></a>00873                                             {
<a name="l00874"></a>00874             <a class="code" href="classdocumentclassifier_1_1DocumentClassifierView.html#e681da143bfb56cf5b07c667480784fb">showErrorMessage</a>(ex.getMessage());
<a name="l00875"></a>00875         }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="e044c823220034132c39c22570559e68"></a><!-- doxytag: member="documentclassifier::DocumentClassifierView::ReadInputDocumentTask::finished" ref="e044c823220034132c39c22570559e68" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void documentclassifier.DocumentClassifierView.ReadInputDocumentTask.finished           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
In any case, whatever is the final state of the task at the end of its life cycle, this method gets executed. 
<p>
In this implementation, it sets the string shown on the status bar, which represents the current status of the task, to the empty one, and sets the value of the property 'taskRunning' to "false", since the task has finished (successfully or not). 
<p>Definition at line <a class="el" href="DocumentClassifierView_8java-source.html#l00882">882</a> of file <a class="el" href="DocumentClassifierView_8java-source.html">DocumentClassifierView.java</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00882"></a>00882                                   {
<a name="l00888"></a>00888             setMessage(<span class="stringliteral">""</span>);
<a name="l00889"></a>00889             <a class="code" href="classdocumentclassifier_1_1DocumentClassifierView.html#c9b244046162bff384717dc266e18cb3">setTaskRunning</a>(<span class="keyword">false</span>);
<a name="l00890"></a>00890         }
</pre></div>
<p>

</div>
</div><p>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="6901e2cf41bec9cfbaacf8f802b5363e"></a><!-- doxytag: member="documentclassifier::DocumentClassifierView::ReadInputDocumentTask::address" ref="6901e2cf41bec9cfbaacf8f802b5363e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">String <a class="el" href="classdocumentclassifier_1_1DocumentClassifierView_1_1ReadInputDocumentTask.html#6901e2cf41bec9cfbaacf8f802b5363e">documentclassifier.DocumentClassifierView.ReadInputDocumentTask.address</a><code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The address of the current query document. 
<p>Definition at line <a class="el" href="DocumentClassifierView_8java-source.html#l00781">781</a> of file <a class="el" href="DocumentClassifierView_8java-source.html">DocumentClassifierView.java</a>.</p>

</div>
</div><p>
<hr>The documentation for this class was generated from the following file:<ul>
<li>src/documentclassifier/<a class="el" href="DocumentClassifierView_8java-source.html">DocumentClassifierView.java</a></ul>
<hr size="1"><address style="text-align: right;"><small>Generated on Thu Oct 30 12:48:48 2008 for DocumentClassifier by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.3 </small></address>
</body>
</html>
