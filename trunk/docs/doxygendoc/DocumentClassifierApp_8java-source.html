<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>DocumentClassifier: /Dati/Documenti/Sviluppo/J2SE/DocumentClassifier/src/documentclassifier/DocumentClassifierApp.java Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.3 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="namespaces.html"><span>Packages</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li class="current"><a href="files.html"><span>Files</span></a></li>
  </ul>
</div>
<h1>/Dati/Documenti/Sviluppo/J2SE/DocumentClassifier/src/documentclassifier/DocumentClassifierApp.java</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00002"></a>00002 <span class="keyword">package </span>documentclassifier;
<a name="l00003"></a>00003 
<a name="l00004"></a>00004 <span class="keyword">import</span> documentclassifier.Scrapers.Scraper;
<a name="l00005"></a>00005 <span class="keyword">import</span> java.io.File;
<a name="l00006"></a>00006 <span class="keyword">import</span> java.io.FileFilter;
<a name="l00007"></a>00007 <span class="keyword">import</span> java.io.FileInputStream;
<a name="l00008"></a>00008 <span class="keyword">import</span> java.io.IOException;
<a name="l00009"></a>00009 <span class="keyword">import</span> java.io.InputStream;
<a name="l00010"></a>00010 <span class="keyword">import</span> java.io.UnsupportedEncodingException;
<a name="l00011"></a>00011 <span class="keyword">import</span> java.net.JarURLConnection;
<a name="l00012"></a>00012 <span class="keyword">import</span> java.net.URL;
<a name="l00013"></a>00013 <span class="keyword">import</span> java.net.URLDecoder;
<a name="l00014"></a>00014 <span class="keyword">import</span> java.util.ArrayList;
<a name="l00015"></a>00015 <span class="keyword">import</span> java.util.Collections;
<a name="l00016"></a>00016 <span class="keyword">import</span> java.util.Enumeration;
<a name="l00017"></a>00017 <span class="keyword">import</span> java.util.LinkedHashSet;
<a name="l00018"></a>00018 <span class="keyword">import</span> java.util.List;
<a name="l00019"></a>00019 <span class="keyword">import</span> java.util.Set;
<a name="l00020"></a>00020 <span class="keyword">import</span> java.util.jar.JarEntry;
<a name="l00021"></a>00021 <span class="keyword">import</span> java.util.jar.JarFile;
<a name="l00022"></a>00022 <span class="keyword">import</span> java.util.logging.Level;
<a name="l00023"></a>00023 <span class="keyword">import</span> java.util.logging.Logger;
<a name="l00024"></a>00024 <span class="keyword">import</span> java.util.prefs.BackingStoreException;
<a name="l00025"></a>00025 <span class="keyword">import</span> java.util.prefs.PreferenceChangeEvent;
<a name="l00026"></a>00026 <span class="keyword">import</span> java.util.prefs.PreferenceChangeListener;
<a name="l00027"></a>00027 <span class="keyword">import</span> java.util.prefs.Preferences;
<a name="l00028"></a>00028 <span class="keyword">import</span> org.jdesktop.application.Action;
<a name="l00029"></a>00029 <span class="keyword">import</span> org.jdesktop.application.Application;
<a name="l00030"></a>00030 <span class="keyword">import</span> org.jdesktop.application.SingleFrameApplication;
<a name="l00031"></a>00031 <span class="keyword">import</span> org.jdesktop.application.Task;
<a name="l00032"></a>00032 
<a name="l00053"></a><a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html">00053</a> <span class="keyword">public</span> <span class="keyword">class </span><a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html">DocumentClassifierApp</a> <span class="keyword">extends</span> SingleFrameApplication implements PreferenceChangeListener {
<a name="l00054"></a>00054     
<a name="l00068"></a>00068     <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Preferences preferenze = Preferences.userRoot();
<a name="l00069"></a>00069     <span class="comment">//Mappa che associa al nome di ogni preferenza il suo valore di default</span>
<a name="l00070"></a>00070     <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <a class="code" href="classdocumentclassifier_1_1MappaPreferenzeDefault.html">MappaPreferenzeDefault</a> mappaPreferenzeDefault=<span class="keyword">new</span> <a class="code" href="classdocumentclassifier_1_1MappaPreferenzeDefault.html">MappaPreferenzeDefault</a>();
<a name="l00075"></a>00075     <span class="keyword">private</span> Set&lt;Set&lt;Documento&gt;&gt; trainingSet;
<a name="l00076"></a>00076     <span class="keyword">private</span> <span class="keywordtype">int</span> trainingSetSize = 0;
<a name="l00077"></a>00077     <span class="comment">//Variabili di configurazione, corrispondenti alle preferenze dell'applicazione</span>
<a name="l00078"></a>00078     <span class="keyword">private</span> <a class="code" href="interfacedocumentclassifier_1_1Scrapers_1_1Scraper.html">Scraper</a> <a class="code" href="interfacedocumentclassifier_1_1Scrapers_1_1Scraper.html">Scraper</a>;
<a name="l00079"></a>00079     <span class="keyword">private</span> String trainingSetDirectory, logFile, listaStopWords,  metrica;
<a name="l00080"></a>00080     <span class="keyword">private</span> <span class="keywordtype">boolean</span> isEliminazioneStopWords, isStemming, isStratificato, isLogging, isOverwriteLogFile, isVisualizzaDocumentoCorrente, isVisualizzaListaDocumenti;
<a name="l00081"></a>00081     <span class="keyword">private</span> String stemmerCorrente;
<a name="l00082"></a>00082     <span class="keyword">private</span> <span class="keywordtype">int</span> KNN,  KFold, maximumKNNValidation;
<a name="l00083"></a>00083     
<a name="l00091"></a>00091     @Override
<a name="l00092"></a><a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#838b76b082738412e12f72c6f9c98b6f">00092</a>     <span class="keyword">protected</span> <span class="keywordtype">void</span> <a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#838b76b082738412e12f72c6f9c98b6f">initialize</a>(String[] args) {
<a name="l00093"></a>00093         super.initialize(args);
<a name="l00094"></a>00094         <span class="comment">/*</span>
<a name="l00095"></a>00095 <span class="comment">         * Genero manualmente un PreferenceChangeEvent per forzare all'avvio del</span>
<a name="l00096"></a>00096 <span class="comment">         * programma la lettura delle preferenze (dall'apposito nodo, rappresentato</span>
<a name="l00097"></a>00097 <span class="comment">         * dalla variabile 'preferenze') e l'inizializzazione delle corrispondenti</span>
<a name="l00098"></a>00098 <span class="comment">         * variabili interne alla classe</span>
<a name="l00099"></a>00099 <span class="comment">         */</span>
<a name="l00100"></a>00100         <a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#84ffe30b7c977802499c7733bcb61fcf">preferenceChange</a>(<span class="keyword">new</span> PreferenceChangeEvent(preferenze, <span class="stringliteral">"All"</span>, <span class="stringliteral">"All"</span>));
<a name="l00101"></a>00101     }
<a name="l00102"></a>00102     
<a name="l00106"></a>00106     @Override
<a name="l00107"></a><a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#6d5244fe65a8adba5c1991d0e5457474">00107</a>     <span class="keyword">protected</span> <span class="keywordtype">void</span> <a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#6d5244fe65a8adba5c1991d0e5457474">startup</a>() {
<a name="l00108"></a>00108         show(<span class="keyword">new</span> <a class="code" href="classdocumentclassifier_1_1DocumentClassifierView.html">DocumentClassifierView</a>(<span class="keyword">this</span>));
<a name="l00109"></a>00109     }
<a name="l00110"></a>00110 
<a name="l00115"></a><a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#15aeb6fe8687507440d73c3e055ef744">00115</a>     <span class="keyword">public</span> <span class="keyword">static</span> <a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html">DocumentClassifierApp</a> <a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#15aeb6fe8687507440d73c3e055ef744">getApplication</a>() {
<a name="l00116"></a>00116         <span class="keywordflow">return</span> Application.getInstance(<a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html">DocumentClassifierApp</a>.class);
<a name="l00117"></a>00117     }
<a name="l00118"></a>00118 
<a name="l00123"></a><a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#f9c701b107f21fa162175d48056fa9d3">00123</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#f9c701b107f21fa162175d48056fa9d3">main</a>(String[] args) {
<a name="l00124"></a>00124         launch(<a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html">DocumentClassifierApp</a>.class, args);
<a name="l00125"></a>00125     }
<a name="l00126"></a>00126     
<a name="l00130"></a>00130     <span class="keyword">private</span> <span class="keywordtype">void</span> cancellaPreferenze() {
<a name="l00131"></a>00131         <span class="keywordflow">try</span> {
<a name="l00132"></a>00132             preferenze.clear();
<a name="l00133"></a>00133         } <span class="keywordflow">catch</span> (BackingStoreException ex) {
<a name="l00134"></a>00134             Logger.getLogger(DocumentClassifierApp.class.getName()).log(Level.SEVERE, null, ex);
<a name="l00135"></a>00135             ex.printStackTrace();
<a name="l00136"></a>00136         }
<a name="l00137"></a>00137     }
<a name="l00138"></a>00138     
<a name="l00150"></a><a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#84ffe30b7c977802499c7733bcb61fcf">00150</a>     <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#84ffe30b7c977802499c7733bcb61fcf">preferenceChange</a>(PreferenceChangeEvent event) {
<a name="l00151"></a>00151         <span class="keywordflow">try</span> {
<a name="l00152"></a>00152             String eventKey = <span class="keyword">event</span>.getKey();
<a name="l00153"></a>00153             String chiaveCorrente, valoreDefault;
<a name="l00154"></a>00154             
<a name="l00155"></a>00155             chiaveCorrente=<a class="code" href="classdocumentclassifier_1_1MappaPreferenzeDefault.html">MappaPreferenzeDefault</a>.SCRAPER;
<a name="l00156"></a>00156             <a class="code" href="interfacedocumentclassifier_1_1Scrapers_1_1Scraper.html">Scraper</a>=getScraperInstance(preferenze.get(chiaveCorrente, mappaPreferenzeDefault.get(chiaveCorrente)));
<a name="l00157"></a>00157             
<a name="l00158"></a>00158             chiaveCorrente=<a class="code" href="classdocumentclassifier_1_1MappaPreferenzeDefault.html">MappaPreferenzeDefault</a>.isELIMINAZIONESTOPWORDS;
<a name="l00159"></a>00159             isEliminazioneStopWords = Boolean.parseBoolean(preferenze.get(chiaveCorrente, mappaPreferenzeDefault.get(chiaveCorrente)));
<a name="l00160"></a>00160             
<a name="l00161"></a>00161             chiaveCorrente=<a class="code" href="classdocumentclassifier_1_1MappaPreferenzeDefault.html">MappaPreferenzeDefault</a>.LISTASTOPWORDS;
<a name="l00162"></a>00162             valoreDefault=mappaPreferenzeDefault.get(chiaveCorrente);
<a name="l00163"></a>00163             listaStopWords = preferenze.get(chiaveCorrente, valoreDefault);
<a name="l00164"></a>00164             <span class="keywordflow">if</span> (!<span class="keyword">new</span> File(listaStopWords).isFile()) {
<a name="l00165"></a>00165                 String message = <span class="stringliteral">"Il file specificato con la lista delle stopwords ("</span>+listaStopWords+<span class="stringliteral">") non è valido,\n"</span>;
<a name="l00166"></a>00166                 listaStopWords = valoreDefault;
<a name="l00167"></a>00167                 <span class="keywordflow">if</span> (<span class="keyword">new</span> File(listaStopWords).isFile() &amp;&amp; isEliminazioneStopWords) {
<a name="l00168"></a>00168                     <a class="code" href="classdocumentclassifier_1_1DocumentClassifierView.html">DocumentClassifierView</a>.mostraMessaggioErrore(message + <span class="stringliteral">"usato il valore di default ("</span> + listaStopWords + <span class="stringliteral">")"</span>);
<a name="l00169"></a>00169                 } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<span class="keyword">new</span> File(listaStopWords).isFile() &amp;&amp; isEliminazioneStopWords) {
<a name="l00170"></a>00170                     <a class="code" href="classdocumentclassifier_1_1DocumentClassifierView.html">DocumentClassifierView</a>.mostraMessaggioErrore(message + <span class="stringliteral">"il file di default ("</span> + listaStopWords + <span class="stringliteral">") non è presente,\ndisattivata l'eliminazione delle stopwords"</span>);
<a name="l00171"></a>00171                     isEliminazioneStopWords = <span class="keyword">false</span>;
<a name="l00172"></a>00172                     preferenze.put(<a class="code" href="classdocumentclassifier_1_1MappaPreferenzeDefault.html">MappaPreferenzeDefault</a>.isELIMINAZIONESTOPWORDS, String.valueOf(isEliminazioneStopWords));
<a name="l00173"></a>00173                 }
<a name="l00174"></a>00174             }
<a name="l00175"></a>00175             
<a name="l00176"></a>00176             chiaveCorrente=<a class="code" href="classdocumentclassifier_1_1MappaPreferenzeDefault.html">MappaPreferenzeDefault</a>.isSTEMMING;
<a name="l00177"></a>00177             isStemming = Boolean.parseBoolean(preferenze.get(chiaveCorrente, mappaPreferenzeDefault.get(chiaveCorrente)));
<a name="l00178"></a>00178             
<a name="l00179"></a>00179             chiaveCorrente=<a class="code" href="classdocumentclassifier_1_1MappaPreferenzeDefault.html">MappaPreferenzeDefault</a>.STEMMER;
<a name="l00180"></a>00180             stemmerCorrente = preferenze.get(chiaveCorrente, mappaPreferenzeDefault.get(chiaveCorrente));
<a name="l00181"></a>00181             
<a name="l00182"></a>00182             <span class="comment">//(Ri)Generazione training set</span>
<a name="l00183"></a>00183             chiaveCorrente=<a class="code" href="classdocumentclassifier_1_1MappaPreferenzeDefault.html">MappaPreferenzeDefault</a>.TRAININGSET;
<a name="l00184"></a>00184             trainingSetDirectory=preferenze.get(chiaveCorrente, valoreDefault);
<a name="l00185"></a>00185             <span class="keywordflow">if</span> (eventKey.equals(<span class="stringliteral">"All"</span>) || eventKey.equals(<a class="code" href="classdocumentclassifier_1_1MappaPreferenzeDefault.html">MappaPreferenzeDefault</a>.isSTEMMING) || eventKey.equals(<a class="code" href="classdocumentclassifier_1_1MappaPreferenzeDefault.html">MappaPreferenzeDefault</a>.LISTASTOPWORDS)) {
<a name="l00186"></a>00186                 valoreDefault=mappaPreferenzeDefault.get(chiaveCorrente);
<a name="l00187"></a>00187                 <span class="keywordflow">if</span>(!<a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#95b80255adbed298dbffa9aeb6c01346">generaTrainingSet</a>(trainingSetDirectory)) {
<a name="l00188"></a>00188                     trainingSetDirectory=valoreDefault;
<a name="l00189"></a>00189                     String message=<span class="stringliteral">"Il percorso specificato per la directory del training set non è valido, "</span>;
<a name="l00190"></a>00190                     <span class="keywordflow">if</span>(<a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#95b80255adbed298dbffa9aeb6c01346">generaTrainingSet</a>(trainingSetDirectory)) {
<a name="l00191"></a>00191                         <a class="code" href="classdocumentclassifier_1_1DocumentClassifierView.html">DocumentClassifierView</a>.mostraMessaggioErrore(message + 
<a name="l00192"></a>00192                                 <span class="stringliteral">"usato il valore di default ("</span> + trainingSetDirectory + <span class="stringliteral">")"</span>);
<a name="l00193"></a>00193                     }
<a name="l00194"></a>00194                     <span class="keywordflow">else</span> {
<a name="l00195"></a>00195                         <a class="code" href="classdocumentclassifier_1_1DocumentClassifierView.html">DocumentClassifierView</a>.mostraMessaggioErrore(message +
<a name="l00196"></a>00196                                 <span class="stringliteral">"e la directory di default ("</span> + trainingSetDirectory + <span class="stringliteral">") non è presente.\n"</span> +
<a name="l00197"></a>00197                                 <span class="stringliteral">"Impossibile eseguire la classificazione"</span>);
<a name="l00198"></a>00198                     }
<a name="l00199"></a>00199                 }
<a name="l00200"></a>00200             }
<a name="l00201"></a>00201             
<a name="l00202"></a>00202             chiaveCorrente=<a class="code" href="classdocumentclassifier_1_1MappaPreferenzeDefault.html">MappaPreferenzeDefault</a>.METRICA;
<a name="l00203"></a>00203             metrica = preferenze.get(chiaveCorrente, mappaPreferenzeDefault.get(chiaveCorrente));
<a name="l00204"></a>00204             
<a name="l00205"></a>00205             chiaveCorrente=<a class="code" href="classdocumentclassifier_1_1MappaPreferenzeDefault.html">MappaPreferenzeDefault</a>.KNN;
<a name="l00206"></a>00206             KNN = Integer.parseInt(preferenze.get(chiaveCorrente, mappaPreferenzeDefault.get(chiaveCorrente)));
<a name="l00207"></a>00207             
<a name="l00208"></a>00208             chiaveCorrente=<a class="code" href="classdocumentclassifier_1_1MappaPreferenzeDefault.html">MappaPreferenzeDefault</a>.MAXKNNVALIDATION;
<a name="l00209"></a>00209             maximumKNNValidation = Integer.parseInt(preferenze.get(chiaveCorrente, mappaPreferenzeDefault.get(chiaveCorrente)));
<a name="l00210"></a>00210             
<a name="l00211"></a>00211             chiaveCorrente=<a class="code" href="classdocumentclassifier_1_1MappaPreferenzeDefault.html">MappaPreferenzeDefault</a>.KFOLD;
<a name="l00212"></a>00212             KFold = Integer.parseInt(preferenze.get(chiaveCorrente, mappaPreferenzeDefault.get(chiaveCorrente)));
<a name="l00213"></a>00213             
<a name="l00214"></a>00214             chiaveCorrente=<a class="code" href="classdocumentclassifier_1_1MappaPreferenzeDefault.html">MappaPreferenzeDefault</a>.isSTRATIFICATO;
<a name="l00215"></a>00215             isStratificato = Boolean.parseBoolean(preferenze.get(chiaveCorrente, mappaPreferenzeDefault.get(chiaveCorrente)));
<a name="l00216"></a>00216             
<a name="l00217"></a>00217             chiaveCorrente=<a class="code" href="classdocumentclassifier_1_1MappaPreferenzeDefault.html">MappaPreferenzeDefault</a>.isLOGGING;
<a name="l00218"></a>00218             isLogging = Boolean.parseBoolean(preferenze.get(chiaveCorrente, mappaPreferenzeDefault.get(chiaveCorrente)));
<a name="l00219"></a>00219             
<a name="l00220"></a>00220             chiaveCorrente=<a class="code" href="classdocumentclassifier_1_1MappaPreferenzeDefault.html">MappaPreferenzeDefault</a>.LOGFILE;
<a name="l00221"></a>00221             logFile = preferenze.get(chiaveCorrente, mappaPreferenzeDefault.get(chiaveCorrente));
<a name="l00222"></a>00222             
<a name="l00223"></a>00223             chiaveCorrente=<a class="code" href="classdocumentclassifier_1_1MappaPreferenzeDefault.html">MappaPreferenzeDefault</a>.isOVERWRITELOGFILE;
<a name="l00224"></a>00224             isOverwriteLogFile = Boolean.parseBoolean(preferenze.get(chiaveCorrente, mappaPreferenzeDefault.get(chiaveCorrente)));
<a name="l00225"></a>00225             
<a name="l00226"></a>00226             chiaveCorrente=<a class="code" href="classdocumentclassifier_1_1MappaPreferenzeDefault.html">MappaPreferenzeDefault</a>.isVISUALIZZADOCUMENTOCORRENTE;
<a name="l00227"></a>00227             isVisualizzaDocumentoCorrente = Boolean.parseBoolean(preferenze.get(chiaveCorrente, mappaPreferenzeDefault.get(chiaveCorrente)));
<a name="l00228"></a>00228             
<a name="l00229"></a>00229             chiaveCorrente=<a class="code" href="classdocumentclassifier_1_1MappaPreferenzeDefault.html">MappaPreferenzeDefault</a>.isVISUALIZZALISTADOCUMENTICORRELATI;
<a name="l00230"></a>00230             isVisualizzaListaDocumenti = Boolean.parseBoolean(preferenze.get(chiaveCorrente, mappaPreferenzeDefault.get(chiaveCorrente)));
<a name="l00231"></a>00231             
<a name="l00232"></a>00232         } <span class="keywordflow">catch</span> (Exception ex) {
<a name="l00233"></a>00233             <a class="code" href="classdocumentclassifier_1_1DocumentClassifierView.html">DocumentClassifierView</a>.mostraMessaggioErrore(ex.toString());
<a name="l00234"></a>00234             cancellaPreferenze();
<a name="l00235"></a>00235             ex.printStackTrace();
<a name="l00236"></a>00236         }
<a name="l00237"></a>00237     }
<a name="l00238"></a>00238     
<a name="l00248"></a><a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#6226eeeb57d774c56c2a6a6fae7088e5">00248</a>     <span class="keyword">protected</span> String[] <a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#6226eeeb57d774c56c2a6a6fae7088e5">leggiDocumento</a>(InputStream IS) <span class="keywordflow">throws</span> Exception {
<a name="l00249"></a>00249         <span class="keywordflow">return</span> <a class="code" href="interfacedocumentclassifier_1_1Scrapers_1_1Scraper.html">Scraper</a>.getDocumento(IS);
<a name="l00250"></a>00250     }
<a name="l00251"></a>00251     
<a name="l00260"></a><a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#2caa500312c10e43ebe43b86239309ed">00260</a>     <span class="keyword">protected</span> <span class="keyword">static</span> List&lt;Class&gt; <a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#2caa500312c10e43ebe43b86239309ed">getClassesForPackage</a>(String pckgname) <span class="keywordflow">throws</span> ClassNotFoundException {
<a name="l00261"></a>00261         <span class="comment">// This will hold a list of directories matching the pckgname. </span>
<a name="l00262"></a>00262         <span class="comment">// There may be more than one if a package is split over multiple jars/paths</span>
<a name="l00263"></a>00263         List&lt;Class&gt; classes = <span class="keyword">new</span> ArrayList&lt;Class&gt;();
<a name="l00264"></a>00264         ArrayList&lt;File&gt; directories = <span class="keyword">new</span> ArrayList&lt;File&gt;();
<a name="l00265"></a>00265         <span class="keywordflow">try</span> {
<a name="l00266"></a>00266             ClassLoader cld = Thread.currentThread().getContextClassLoader();
<a name="l00267"></a>00267             <span class="keywordflow">if</span> (cld == null) {
<a name="l00268"></a>00268                 <span class="keywordflow">throw</span> <span class="keyword">new</span> ClassNotFoundException(<span class="stringliteral">"Can't get class loader."</span>);
<a name="l00269"></a>00269             }
<a name="l00270"></a>00270             <span class="comment">// Ask for all resources for the path</span>
<a name="l00271"></a>00271             Enumeration&lt;URL&gt; resources = cld.getResources(pckgname.replace(<span class="charliteral">'.'</span>, <span class="charliteral">'/'</span>));
<a name="l00272"></a>00272             <span class="keywordflow">while</span> (resources.hasMoreElements()) {
<a name="l00273"></a>00273                 URL res = resources.nextElement();
<a name="l00274"></a>00274                 <span class="keywordflow">if</span> (res.getProtocol().equalsIgnoreCase(<span class="stringliteral">"jar"</span>)) {
<a name="l00275"></a>00275                     JarURLConnection conn = (JarURLConnection) res.openConnection();
<a name="l00276"></a>00276                     JarFile jar = conn.getJarFile();
<a name="l00277"></a>00277                     <span class="keywordflow">for</span> (JarEntry e : Collections.list(jar.entries())) {
<a name="l00278"></a>00278 
<a name="l00279"></a>00279                         <span class="keywordflow">if</span> (e.getName().startsWith(pckgname.replace(<span class="charliteral">'.'</span>, <span class="charliteral">'/'</span>)) &amp;&amp; e.getName().endsWith(<span class="stringliteral">".class"</span>) &amp;&amp; !e.getName().contains(<span class="stringliteral">"$"</span>)) {
<a name="l00280"></a>00280                             String className =
<a name="l00281"></a>00281                                     e.getName().replace(<span class="stringliteral">"/"</span>, <span class="stringliteral">"."</span>).substring(0, e.getName().length() - 6);
<a name="l00282"></a>00282                             <span class="comment">//System.out.println(className);</span>
<a name="l00283"></a>00283                             classes.add(Class.forName(className));
<a name="l00284"></a>00284                         }
<a name="l00285"></a>00285                     }
<a name="l00286"></a>00286                 } <span class="keywordflow">else</span> {
<a name="l00287"></a>00287                     directories.add(<span class="keyword">new</span> File(URLDecoder.decode(res.getPath(), <span class="stringliteral">"UTF-8"</span>)));
<a name="l00288"></a>00288                 }
<a name="l00289"></a>00289             }
<a name="l00290"></a>00290         } <span class="keywordflow">catch</span> (NullPointerException x) {
<a name="l00291"></a>00291             <span class="keywordflow">throw</span> <span class="keyword">new</span> ClassNotFoundException(pckgname + <span class="stringliteral">" does not appear to be "</span> +
<a name="l00292"></a>00292                     <span class="stringliteral">"a valid package (Null pointer exception)"</span>);
<a name="l00293"></a>00293         } <span class="keywordflow">catch</span> (UnsupportedEncodingException encex) {
<a name="l00294"></a>00294             <span class="keywordflow">throw</span> <span class="keyword">new</span> ClassNotFoundException(pckgname + <span class="stringliteral">" does not appear to be "</span> +
<a name="l00295"></a>00295                     <span class="stringliteral">"a valid package (Unsupported encoding)"</span>);
<a name="l00296"></a>00296         } <span class="keywordflow">catch</span> (IOException ioex) {
<a name="l00297"></a>00297             <span class="keywordflow">throw</span> <span class="keyword">new</span> ClassNotFoundException(<span class="stringliteral">"IOException was thrown when trying "</span> +
<a name="l00298"></a>00298                     <span class="stringliteral">"to get all resources for "</span> + pckgname);
<a name="l00299"></a>00299         }
<a name="l00300"></a>00300 
<a name="l00301"></a>00301         <span class="comment">// For every directory identified capture all the .class files</span>
<a name="l00302"></a>00302         <span class="keywordflow">for</span> (File directory : directories) {
<a name="l00303"></a>00303             <span class="keywordflow">if</span> (directory.exists()) {
<a name="l00304"></a>00304                 <span class="comment">// Get the list of the files contained in the package</span>
<a name="l00305"></a>00305                 String[] files = directory.list();
<a name="l00306"></a>00306                 <span class="keywordflow">for</span> (String file : files) {
<a name="l00307"></a>00307                     <span class="comment">// we are only interested in .class files</span>
<a name="l00308"></a>00308                     <span class="keywordflow">if</span> (file.endsWith(<span class="stringliteral">".class"</span>)) {
<a name="l00309"></a>00309                         <span class="comment">// removes the .class extension</span>
<a name="l00310"></a>00310                         classes.add(Class.forName(pckgname + <span class="charliteral">'.'</span> + file.substring(0, file.length() - 6)));
<a name="l00311"></a>00311                     }
<a name="l00312"></a>00312                 }
<a name="l00313"></a>00313             } <span class="keywordflow">else</span> {
<a name="l00314"></a>00314                 <span class="keywordflow">throw</span> <span class="keyword">new</span> ClassNotFoundException(pckgname + <span class="stringliteral">" ("</span> + directory.getPath() +
<a name="l00315"></a>00315                         <span class="stringliteral">") does not appear to be a valid package"</span>);
<a name="l00316"></a>00316             }
<a name="l00317"></a>00317         }
<a name="l00318"></a>00318         <span class="keywordflow">return</span> classes;
<a name="l00319"></a>00319     }
<a name="l00320"></a>00320     
<a name="l00335"></a><a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#0f82117bedf517a70688cf0ca8521c74">00335</a>     <span class="keyword">protected</span> String <a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#0f82117bedf517a70688cf0ca8521c74">getDirectoryTrainingSet</a>(<span class="keywordtype">boolean</span> defaultValue) {
<a name="l00336"></a>00336         <span class="keywordflow">return</span> (defaultValue) ? mappaPreferenzeDefault.get(<a class="code" href="classdocumentclassifier_1_1MappaPreferenzeDefault.html">MappaPreferenzeDefault</a>.TRAININGSET) : trainingSetDirectory;
<a name="l00337"></a>00337     }
<a name="l00338"></a>00338     
<a name="l00346"></a><a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#0d1b01a7e9b0c6fc9107dfa6e8e76bfe">00346</a>     <span class="keyword">protected</span> <span class="keywordtype">boolean</span> isEliminazioneStopWords(<span class="keywordtype">boolean</span> defaultValue) {
<a name="l00347"></a>00347         <span class="keywordflow">return</span> (defaultValue) ? Boolean.parseBoolean(mappaPreferenzeDefault.get(<a class="code" href="classdocumentclassifier_1_1MappaPreferenzeDefault.html">MappaPreferenzeDefault</a>.isELIMINAZIONESTOPWORDS)): isEliminazioneStopWords;
<a name="l00348"></a>00348     }
<a name="l00349"></a>00349     
<a name="l00357"></a><a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#d2fd902353da46cfbf0af6cda3bdabda">00357</a>     <span class="keyword">protected</span> String <a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#d2fd902353da46cfbf0af6cda3bdabda">getListaStopWords</a>(<span class="keywordtype">boolean</span> defaultValue) {
<a name="l00358"></a>00358         <span class="keywordflow">return</span> (defaultValue) ? mappaPreferenzeDefault.get(<a class="code" href="classdocumentclassifier_1_1MappaPreferenzeDefault.html">MappaPreferenzeDefault</a>.LISTASTOPWORDS) : listaStopWords;
<a name="l00359"></a>00359     }
<a name="l00360"></a>00360     
<a name="l00368"></a><a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#10608dd67104ddc1c238671a2a88e984">00368</a>     <span class="keyword">protected</span> String <a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#10608dd67104ddc1c238671a2a88e984">getLogFile</a>(<span class="keywordtype">boolean</span> defaultValue) {
<a name="l00369"></a>00369         <span class="keywordflow">return</span> (defaultValue) ? mappaPreferenzeDefault.get(<a class="code" href="classdocumentclassifier_1_1MappaPreferenzeDefault.html">MappaPreferenzeDefault</a>.LOGFILE) : logFile;
<a name="l00370"></a>00370     }
<a name="l00371"></a>00371     
<a name="l00379"></a><a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#3d6db92b960e380085ce9ead014b21d8">00379</a>     <span class="keyword">protected</span> <span class="keywordtype">boolean</span> isLogging(<span class="keywordtype">boolean</span> defaultValue) {
<a name="l00380"></a>00380         <span class="keywordflow">return</span> (defaultValue) ? Boolean.parseBoolean(mappaPreferenzeDefault.get(<a class="code" href="classdocumentclassifier_1_1MappaPreferenzeDefault.html">MappaPreferenzeDefault</a>.isLOGGING)) : isLogging;
<a name="l00381"></a>00381     }
<a name="l00382"></a>00382     
<a name="l00388"></a><a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#bee8fdaa24f9ae70e848746b37abe7be">00388</a>     <span class="keyword">protected</span> <a class="code" href="classdocumentclassifier_1_1MappaPreferenzeDefault.html">MappaPreferenzeDefault</a> <a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#bee8fdaa24f9ae70e848746b37abe7be">getMappaPreferenze</a>() {
<a name="l00389"></a>00389         <span class="keywordflow">return</span> mappaPreferenzeDefault;
<a name="l00390"></a>00390     }
<a name="l00391"></a>00391     
<a name="l00399"></a><a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#945e16a1c94a7837bab6b2f6997233b2">00399</a>     <span class="keyword">protected</span> String <a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#945e16a1c94a7837bab6b2f6997233b2">getMetrica</a>(<span class="keywordtype">boolean</span> defaultValue) {
<a name="l00400"></a>00400         <span class="keywordflow">return</span> (defaultValue) ? mappaPreferenzeDefault.get(<a class="code" href="classdocumentclassifier_1_1MappaPreferenzeDefault.html">MappaPreferenzeDefault</a>.METRICA) : metrica;
<a name="l00401"></a>00401     }
<a name="l00402"></a>00402     
<a name="l00410"></a><a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#b9ddf8ca74c5f650412a87d34d1af656">00410</a>     <span class="keyword">protected</span> <span class="keywordtype">int</span> <a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#b9ddf8ca74c5f650412a87d34d1af656">getKFold</a>(<span class="keywordtype">boolean</span> defaultValue) {
<a name="l00411"></a>00411         <span class="keywordflow">return</span> (defaultValue) ? Integer.parseInt(mappaPreferenzeDefault.get(<a class="code" href="classdocumentclassifier_1_1MappaPreferenzeDefault.html">MappaPreferenzeDefault</a>.KFOLD)): KFold;
<a name="l00412"></a>00412     }
<a name="l00413"></a>00413     
<a name="l00423"></a><a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#1f47d295f6eec224a79cdb0e987a62a2">00423</a>     <span class="keyword">protected</span> <span class="keywordtype">int</span> <a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#1f47d295f6eec224a79cdb0e987a62a2">getKFoldMaximum</a>() {
<a name="l00424"></a>00424         <span class="keywordflow">return</span> trainingSetSize;
<a name="l00425"></a>00425     }
<a name="l00426"></a>00426     
<a name="l00436"></a><a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#f59af2d39854011f5417a845d96ba3da">00436</a>     <span class="keyword">protected</span> <span class="keywordtype">int</span> <a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#f59af2d39854011f5417a845d96ba3da">getKFoldMinimum</a>() {
<a name="l00437"></a>00437         <span class="keywordflow">return</span> 2;
<a name="l00438"></a>00438     }
<a name="l00439"></a>00439     
<a name="l00447"></a><a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#9111e22b74d4bcb5a1c89bfe12047862">00447</a>     <span class="keyword">protected</span> <span class="keywordtype">int</span> <a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#9111e22b74d4bcb5a1c89bfe12047862">getKNN</a>(<span class="keywordtype">boolean</span> defaultValue) {
<a name="l00448"></a>00448         <span class="keywordflow">return</span> (defaultValue) ? Integer.parseInt(mappaPreferenzeDefault.get(<a class="code" href="classdocumentclassifier_1_1MappaPreferenzeDefault.html">MappaPreferenzeDefault</a>.KNN)) : KNN;
<a name="l00449"></a>00449     }
<a name="l00450"></a>00450     
<a name="l00457"></a><a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#4cbd67145342bfc7fab567ff8944ecf0">00457</a>     <span class="keyword">protected</span> <span class="keywordtype">void</span> <a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#4cbd67145342bfc7fab567ff8944ecf0">setKNN</a>(<span class="keywordtype">int</span> K) {
<a name="l00458"></a>00458         preferenze.put(<a class="code" href="classdocumentclassifier_1_1MappaPreferenzeDefault.html">MappaPreferenzeDefault</a>.KNN, String.valueOf(K));
<a name="l00459"></a>00459         KNN=K;
<a name="l00460"></a>00460         <span class="comment">//preferenceChange(new PreferenceChangeEvent(preferenze, MappaPreferenzeDefault.KNN, stringK));</span>
<a name="l00461"></a>00461     }
<a name="l00462"></a>00462     
<a name="l00470"></a><a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#10d37677b53e8c6cef2dbbbcda11ac5a">00470</a>     <span class="keyword">protected</span> <span class="keywordtype">int</span> <a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#10d37677b53e8c6cef2dbbbcda11ac5a">getKNNMaximum</a>() {
<a name="l00471"></a>00471         <span class="keywordflow">return</span> trainingSetSize;
<a name="l00472"></a>00472     }
<a name="l00473"></a>00473     
<a name="l00481"></a><a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#459bba5a84df91eae3ffdaa738ba3494">00481</a>     <span class="keyword">protected</span> <span class="keywordtype">int</span> <a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#459bba5a84df91eae3ffdaa738ba3494">getKNNMinimum</a>() {
<a name="l00482"></a>00482         <span class="keywordflow">return</span> 1;
<a name="l00483"></a>00483     }
<a name="l00484"></a>00484     
<a name="l00492"></a><a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#ae24da978f2833c2f2b18afc97b45d95">00492</a>     <span class="keyword">protected</span> <span class="keywordtype">int</span> <a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#ae24da978f2833c2f2b18afc97b45d95">getMaximumKNNValidation</a>(<span class="keywordtype">boolean</span> defaultValue) {
<a name="l00493"></a>00493         <span class="keywordflow">return</span> (defaultValue) ? Integer.parseInt(mappaPreferenzeDefault.get(<a class="code" href="classdocumentclassifier_1_1MappaPreferenzeDefault.html">MappaPreferenzeDefault</a>.MAXKNNVALIDATION)) : maximumKNNValidation;
<a name="l00494"></a>00494     }
<a name="l00495"></a>00495     
<a name="l00503"></a><a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#86075df3152b8102d0a03ca371a97ad9">00503</a>     <span class="keyword">protected</span> <span class="keywordtype">boolean</span> isOverwriteLogFile(<span class="keywordtype">boolean</span> defaultValue) {
<a name="l00504"></a>00504         <span class="keywordflow">return</span> (defaultValue) ? Boolean.parseBoolean(mappaPreferenzeDefault.get(<a class="code" href="classdocumentclassifier_1_1MappaPreferenzeDefault.html">MappaPreferenzeDefault</a>.isOVERWRITELOGFILE)) : isOverwriteLogFile;
<a name="l00505"></a>00505     }
<a name="l00506"></a>00506     
<a name="l00514"></a><a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#5556fbf6f886adb8ce62ed8b30ec9eab">00514</a>     <span class="keyword">protected</span> Preferences <a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#5556fbf6f886adb8ce62ed8b30ec9eab">getPreferenze</a>() {
<a name="l00515"></a>00515         <span class="keywordflow">return</span> preferenze;
<a name="l00516"></a>00516     }
<a name="l00517"></a>00517     
<a name="l00525"></a><a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#b87db9949397c5cd9fc100299476a476">00525</a>     <span class="keyword">protected</span> <a class="code" href="interfacedocumentclassifier_1_1Scrapers_1_1Scraper.html">Scraper</a> <a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#b87db9949397c5cd9fc100299476a476">getScraper</a>(<span class="keywordtype">boolean</span> defaultValue) {
<a name="l00526"></a>00526         <span class="keywordflow">return</span> (defaultValue) ? getScraperInstance(mappaPreferenzeDefault.get(<a class="code" href="classdocumentclassifier_1_1MappaPreferenzeDefault.html">MappaPreferenzeDefault</a>.SCRAPER)) : <a class="code" href="interfacedocumentclassifier_1_1Scrapers_1_1Scraper.html">Scraper</a>;
<a name="l00527"></a>00527     }
<a name="l00528"></a>00528     
<a name="l00537"></a>00537     <span class="keyword">private</span> <a class="code" href="interfacedocumentclassifier_1_1Scrapers_1_1Scraper.html">Scraper</a> getScraperInstance(String nomeClasse) {
<a name="l00538"></a>00538         <span class="keywordflow">try</span> {
<a name="l00539"></a>00539             Class scraperCorrenteClass = Class.forName(nomeClasse);
<a name="l00540"></a>00540             <span class="keywordflow">return</span> (<a class="code" href="interfacedocumentclassifier_1_1Scrapers_1_1Scraper.html">Scraper</a>) scraperCorrenteClass.cast(scraperCorrenteClass.newInstance());
<a name="l00541"></a>00541         } <span class="keywordflow">catch</span> (Exception ex) {
<a name="l00542"></a>00542             DocumentClassifierView.mostraMessaggioErrore(ex.toString());
<a name="l00543"></a>00543             ex.printStackTrace();
<a name="l00544"></a>00544             <span class="keywordflow">return</span> null;
<a name="l00545"></a>00545         }
<a name="l00546"></a>00546     }
<a name="l00547"></a>00547     
<a name="l00554"></a><a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#709ad4f115cbbe09de9155564dbead6c">00554</a>     <span class="keyword">protected</span> String <a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#709ad4f115cbbe09de9155564dbead6c">getScrapersPackageName</a>() {
<a name="l00555"></a>00555         <span class="keywordflow">return</span> <span class="stringliteral">"documentclassifier.Scrapers"</span>;
<a name="l00556"></a>00556     }
<a name="l00557"></a>00557     
<a name="l00564"></a><a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#49111d225df42e9b7197cee3e12235aa">00564</a>     <span class="keyword">protected</span> String <a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#49111d225df42e9b7197cee3e12235aa">getStemmersPackageName</a>() {
<a name="l00565"></a>00565         <span class="keywordflow">return</span> <span class="stringliteral">"org.tartarus.snowball.ext"</span>;
<a name="l00566"></a>00566     }
<a name="l00567"></a>00567     
<a name="l00575"></a><a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#c30baed9f9b3fa730e7bb4983cd0f997">00575</a>     <span class="keyword">protected</span> <span class="keywordtype">boolean</span> isStemming(<span class="keywordtype">boolean</span> defaultValue) {
<a name="l00576"></a>00576         <span class="keywordflow">return</span> (defaultValue) ? Boolean.parseBoolean(mappaPreferenzeDefault.get(<a class="code" href="classdocumentclassifier_1_1MappaPreferenzeDefault.html">MappaPreferenzeDefault</a>.isSTEMMING)) : isStemming;
<a name="l00577"></a>00577     }
<a name="l00578"></a>00578     
<a name="l00586"></a><a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#8e70afbf45782d7500d95425b4bf12fe">00586</a>     <span class="keyword">protected</span> String <a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#8e70afbf45782d7500d95425b4bf12fe">getStemmer</a>(<span class="keywordtype">boolean</span> defaultValue) {
<a name="l00587"></a>00587         <span class="keywordflow">return</span> (defaultValue) ? mappaPreferenzeDefault.get(<a class="code" href="classdocumentclassifier_1_1MappaPreferenzeDefault.html">MappaPreferenzeDefault</a>.STEMMER) : stemmerCorrente;
<a name="l00588"></a>00588     }
<a name="l00589"></a>00589     
<a name="l00597"></a><a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#112f0d95cebce4c17b5b375678e4094a">00597</a>     <span class="keyword">protected</span> <span class="keywordtype">boolean</span> isStratificato(<span class="keywordtype">boolean</span> defaultValue) {
<a name="l00598"></a>00598         <span class="keywordflow">return</span> (defaultValue) ? Boolean.parseBoolean(mappaPreferenzeDefault.get(<a class="code" href="classdocumentclassifier_1_1MappaPreferenzeDefault.html">MappaPreferenzeDefault</a>.isSTRATIFICATO)) : isStratificato;
<a name="l00599"></a>00599     }
<a name="l00600"></a>00600     
<a name="l00613"></a>00613     @Action(block = Task.BlockingScope.APPLICATION)
<a name="l00614"></a><a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#95b80255adbed298dbffa9aeb6c01346">00614</a>     public synchronized <span class="keywordtype">boolean</span> <a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#95b80255adbed298dbffa9aeb6c01346">generaTrainingSet</a>(String percorso) throws Exception {
<a name="l00615"></a>00615         File dir = <span class="keyword">new</span> File(percorso);
<a name="l00616"></a>00616         <span class="keywordflow">if</span> (dir.isDirectory()) {
<a name="l00622"></a>00622             Set&lt;Set&lt;Documento&gt;&gt; copiaTrainingSet = Collections.synchronizedSet(<span class="keyword">new</span> LinkedHashSet&lt;Set&lt;Documento&gt;&gt;());
<a name="l00623"></a>00623             trainingSetSize = 0;
<a name="l00624"></a>00624             <span class="keywordflow">for</span> (File D : dir.listFiles()) {
<a name="l00625"></a>00625                 <span class="keywordflow">if</span> (D.isDirectory() &amp;&amp; D.list().length &gt; 0) {
<a name="l00626"></a>00626                     Set&lt;Documento&gt; notizieCategoriaCorrente = <span class="keyword">new</span> LinkedHashSet&lt;Documento&gt;();
<a name="l00627"></a>00627                     <span class="keywordflow">for</span> (File F : D.listFiles(<span class="keyword">new</span> FileFilter() {
<a name="l00628"></a>00628 
<a name="l00629"></a>00629                         <span class="keyword">public</span> <span class="keywordtype">boolean</span> accept(File arg) {
<a name="l00634"></a>00634                             <span class="keywordflow">if</span> (arg.isDirectory()) {
<a name="l00635"></a>00635                                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00636"></a>00636                             } <span class="keywordflow">else</span> {
<a name="l00637"></a>00637                                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00638"></a>00638                             }
<a name="l00639"></a>00639                         }
<a name="l00640"></a>00640                     })) {
<a name="l00641"></a>00641                         String[] titoloTesto = <a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#6226eeeb57d774c56c2a6a6fae7088e5">leggiDocumento</a>(<span class="keyword">new</span> FileInputStream(F));
<a name="l00642"></a>00642                         String titolo=titoloTesto[0];
<a name="l00643"></a>00643                         String testo=titoloTesto[1];
<a name="l00644"></a>00644                         String categoria=D.getName();
<a name="l00649"></a>00649                         <a class="code" href="classdocumentclassifier_1_1Documento.html">Documento</a> nuovoDocumento = <span class="keyword">new</span> <a class="code" href="classdocumentclassifier_1_1Documento.html">Documento</a>(titolo,testo,categoria,F.getCanonicalPath());
<a name="l00650"></a>00650                         <span class="keywordtype">boolean</span> aggiungiNuovoDocumento=<span class="keyword">true</span>;
<a name="l00660"></a>00660                         <span class="keywordflow">for</span>(Set&lt;Documento&gt; sottoInsiemeCorrente : copiaTrainingSet) {
<a name="l00661"></a>00661                             <span class="keywordflow">for</span> (<a class="code" href="classdocumentclassifier_1_1Documento.html">Documento</a> documentoCorrente : sottoInsiemeCorrente) {
<a name="l00662"></a>00662                                 <span class="keywordflow">if</span> (documentoCorrente.equals(nuovoDocumento)) {
<a name="l00663"></a>00663                                     documentoCorrente.addCategoria(categoria);
<a name="l00667"></a>00667                                     nuovoDocumento=documentoCorrente;
<a name="l00668"></a>00668                                     aggiungiNuovoDocumento=<span class="keyword">false</span>;
<a name="l00669"></a>00669                                     <span class="keywordflow">break</span>;
<a name="l00670"></a>00670                                 }
<a name="l00671"></a>00671                             }
<a name="l00672"></a>00672                         }
<a name="l00676"></a>00676                         <span class="keywordflow">if</span>(aggiungiNuovoDocumento) {
<a name="l00677"></a>00677                             <span class="comment">//documento=new Documento(titolo, testo, categoria, F.getCanonicalPath());</span>
<a name="l00678"></a>00678                             trainingSetSize++;
<a name="l00679"></a>00679                         }
<a name="l00684"></a>00684                         notizieCategoriaCorrente.add(nuovoDocumento);
<a name="l00685"></a>00685                     }
<a name="l00686"></a>00686                     copiaTrainingSet.add(notizieCategoriaCorrente);
<a name="l00687"></a>00687                 }
<a name="l00688"></a>00688             }
<a name="l00692"></a>00692             copiaTrainingSet=Collections.unmodifiableSet(copiaTrainingSet);
<a name="l00697"></a>00697             trainingSet = copiaTrainingSet;
<a name="l00698"></a>00698             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00699"></a>00699         } <span class="keywordflow">else</span> {
<a name="l00700"></a>00700             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00701"></a>00701         }
<a name="l00702"></a>00702     }
<a name="l00703"></a>00703     
<a name="l00713"></a><a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#28adb7e92ccd8bf601e3d55d67a66d4c">00713</a>     <span class="keyword">protected</span> <span class="keyword">synchronized</span> Set&lt;Set&lt;Documento&gt;&gt; <a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#28adb7e92ccd8bf601e3d55d67a66d4c">getTrainingSet</a>() {
<a name="l00714"></a>00714         <span class="keywordflow">return</span> trainingSet;
<a name="l00715"></a>00715     }
<a name="l00716"></a>00716     
<a name="l00726"></a><a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#187bbb67d82e8505c10d2b0721d0ef22">00726</a>     <span class="keyword">protected</span> <span class="keyword">synchronized</span> <span class="keywordtype">int</span> <a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#187bbb67d82e8505c10d2b0721d0ef22">getTrainingSetSize</a>() {
<a name="l00727"></a>00727         <span class="keywordflow">return</span> trainingSetSize;
<a name="l00728"></a>00728     }
<a name="l00729"></a>00729     
<a name="l00739"></a><a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#1a3d8fca596d8ab90d7d5cf2c1e6ac51">00739</a>     <span class="keyword">protected</span> <span class="keywordtype">boolean</span> isVisualizzaDocumentoCorrente(<span class="keywordtype">boolean</span> defaultValue) {
<a name="l00740"></a>00740         <span class="keywordflow">return</span> (defaultValue) ? Boolean.parseBoolean(mappaPreferenzeDefault.get(<a class="code" href="classdocumentclassifier_1_1MappaPreferenzeDefault.html">MappaPreferenzeDefault</a>.isVISUALIZZADOCUMENTOCORRENTE)) : isVisualizzaDocumentoCorrente;
<a name="l00741"></a>00741     }
<a name="l00742"></a>00742     
<a name="l00752"></a><a class="code" href="classdocumentclassifier_1_1DocumentClassifierApp.html#9edb78771120ae2cfb2ebb3f5e891362">00752</a>     <span class="keyword">protected</span> <span class="keywordtype">boolean</span> isVisualizzaListaDocumenti(<span class="keywordtype">boolean</span> defaultValue) {
<a name="l00753"></a>00753         <span class="keywordflow">return</span> (defaultValue) ? Boolean.parseBoolean(mappaPreferenzeDefault.get(<a class="code" href="classdocumentclassifier_1_1MappaPreferenzeDefault.html">MappaPreferenzeDefault</a>.isVISUALIZZALISTADOCUMENTICORRELATI)) : isVisualizzaListaDocumenti;
<a name="l00754"></a>00754     }
<a name="l00755"></a>00755     
<a name="l00756"></a>00756 }
</pre></div><hr size="1"><address style="text-align: right;"><small>Generated on Wed Sep 17 12:53:46 2008 for DocumentClassifier by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.3 </small></address>
</body>
</html>
